{"ast":null,"code":"\"use strict\";\n\nvar __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Notifications = exports.NotificationType = void 0;\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar react_client_1 = require(\"@speechly/react-client\");\n\nvar styled_components_1 = __importDefault(require(\"styled-components\"));\n\nvar Info_1 = require(\"./Info\");\n\nvar types_1 = require(\"../types\");\n\nvar NotificationType;\n\n(function (NotificationType) {\n  NotificationType[\"info\"] = \"info\";\n  NotificationType[\"warning\"] = \"warning\";\n})(NotificationType = exports.NotificationType || (exports.NotificationType = {}));\n\nvar NotificationId = 0;\n\nvar Notifications = function (props) {\n  var speechState = (0, react_client_1.useSpeechContext)().speechState;\n\n  var _a = (0, react_1.useState)(null),\n      notification = _a[0],\n      setNotification = _a[1];\n  /*\n    {\n      type: NotificationType.info,\n      message: \"Could not find 'Good vibes pants'\",\n      footnote: \"Try: 'Sneakers'\",\n      visible: true,\n    }\n    {\n      type: NotificationType.warning,\n      message: \"Bad audio. Please say again.\",\n      visible: true,\n    },\n    {\n      type: NotificationType.warning,\n      message: \"Sorry, all we hear is silence.\",\n      visible: true,\n    },\n    {\n      type: NotificationType.info,\n      message: \"Please say again\",\n      footnote: 'Try: \"Sneakers\"',\n      visible: true,\n    }\n  */\n\n\n  (0, react_1.useEffect)(function () {\n    var subDismiss = PubSub.subscribe(types_1.SpeechlyUiEvents.DismissNotification, function (message, payload) {\n      hideHints();\n    });\n    var subNotification = PubSub.subscribe(types_1.SpeechlyUiEvents.Notification, function (message, payload) {\n      setNotification({\n        type: NotificationType.info,\n        notificationId: \"msg-\".concat(NotificationId++),\n        message: payload.message,\n        footnote: payload.footnote,\n        visible: true\n      });\n    });\n    var subWarningNotification = PubSub.subscribe(types_1.SpeechlyUiEvents.WarningNotification, function (message, payload) {\n      setNotification({\n        type: NotificationType.warning,\n        notificationId: \"msg-\".concat(NotificationId++),\n        message: payload.message,\n        footnote: payload.footnote,\n        visible: true\n      });\n    });\n    return function () {\n      PubSub.unsubscribe(subNotification);\n      PubSub.unsubscribe(subWarningNotification);\n      PubSub.unsubscribe(subDismiss);\n    };\n  }, []);\n  (0, react_1.useEffect)(function () {\n    switch (speechState) {\n      case react_client_1.SpeechState.Recording:\n        {\n          hideHints();\n        }\n    }\n  }, [speechState]);\n\n  var hideHints = function () {\n    setNotification(function (prev) {\n      return prev !== null ? __assign(__assign({}, prev), {\n        visible: false\n      }) : null;\n    });\n  };\n\n  return react_1.default.createElement(react_1.default.Fragment, null, (notification === null || notification === void 0 ? void 0 : notification.type) === NotificationType.info && react_1.default.createElement(Info_1.Info, {\n    visible: (notification === null || notification === void 0 ? void 0 : notification.visible) || false,\n    color: \"#fff\",\n    backgroundcolor: \"#46c\"\n  }, react_1.default.createElement(InfoIcon, {\n    color: \"#fff\"\n  }), react_1.default.createElement(\"div\", null, notification === null || notification === void 0 ? void 0 : notification.message, (notification === null || notification === void 0 ? void 0 : notification.footnote) !== null && react_1.default.createElement(react_1.default.Fragment, null, react_1.default.createElement(\"br\", null), react_1.default.createElement(\"small\", null, notification.footnote)))), (notification === null || notification === void 0 ? void 0 : notification.type) === NotificationType.warning && react_1.default.createElement(Info_1.Info, {\n    visible: (notification === null || notification === void 0 ? void 0 : notification.visible) || false,\n    color: \"#000\",\n    backgroundcolor: \"#fc0\"\n  }, react_1.default.createElement(WarningIcon, {\n    color: \"#000\"\n  }), react_1.default.createElement(\"div\", null, notification === null || notification === void 0 ? void 0 : notification.message, (notification === null || notification === void 0 ? void 0 : notification.footnote) !== null && react_1.default.createElement(react_1.default.Fragment, null, react_1.default.createElement(\"br\", null), react_1.default.createElement(\"small\", null, notification === null || notification === void 0 ? void 0 : notification.footnote)))));\n};\n\nexports.Notifications = Notifications;\n\nvar InfoIcon = function (props) {\n  return react_1.default.createElement(IconSvg, {\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, react_1.default.createElement(\"g\", {\n    fill: props.color,\n    fillRule: \"evenodd\"\n  }, react_1.default.createElement(\"path\", {\n    d: \"M12 1.5c5.799 0 10.5 4.701 10.5 10.5S17.799 22.5 12 22.5 1.5 17.799 1.5 12 6.201 1.5 12 1.5zM12 3a9 9 0 100 18 9 9 0 000-18z\"\n  }), react_1.default.createElement(\"path\", {\n    fillRule: \"nonzero\",\n    d: \"M13 10v8h-2v-6.5h-1V10z\"\n  }), react_1.default.createElement(\"circle\", {\n    cx: \"11.75\",\n    cy: \"7.5\",\n    r: \"1.5\"\n  })));\n};\n\nvar WarningIcon = function (props) {\n  return react_1.default.createElement(IconSvg, {\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, react_1.default.createElement(\"path\", {\n    d: \"M12.738.743a1.5 1.5 0 01.568.567l10.429 18.452A1.5 1.5 0 0122.429 22H1.571a1.5 1.5 0 01-1.306-2.238L10.695 1.31a1.5 1.5 0 012.043-.567zM8.5 13H7v1a5.001 5.001 0 004.25 4.944V21h1.5v-2.056A5.001 5.001 0 0017 14v-1h-1.5v1l-.005.192A3.5 3.5 0 0112 17.5l-.192-.005A3.5 3.5 0 018.5 14v-1zM12 6a2 2 0 00-2 2v6a2 2 0 104 0V8a2 2 0 00-2-2z\",\n    fill: props.color,\n    fillRule: \"evenodd\"\n  }));\n};\n\nvar IconSvg = styled_components_1.default.svg(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  width: 1.5rem;\\n  height: 1.5rem;\\n  flex-shrink: 0;\\n  margin-right: 0.5rem;\\n  margin-bottom: auto;\\n\"], [\"\\n  width: 1.5rem;\\n  height: 1.5rem;\\n  flex-shrink: 0;\\n  margin-right: 0.5rem;\\n  margin-bottom: auto;\\n\"])));\nvar templateObject_1;","map":{"version":3,"mappings":"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","names":["NotificationType","exports","NotificationId","Notifications","speechState","notification","setNotification","subDismiss","PubSub","subscribe","types_1","DismissNotification","message","payload","hideHints","subNotification","Notification","type","info","notificationId","footnote","visible","subWarningNotification","WarningNotification","warning","unsubscribe","react_client_1","Recording","prev","__assign","react_1","Info_1","color","backgroundcolor","InfoIcon","WarningIcon","IconSvg","viewBox","xmlns","fill","props","fillRule","d","cx","cy","r","styled_components_1","svg","templateObject_1"],"sources":["/react-ui/src/components/Notifications.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { SpeechState, useSpeechContext } from '@speechly/react-client'\nimport styled from 'styled-components'\nimport { Info } from './Info'\nimport { SpeechlyUiEvents } from '../types'\n\nexport enum NotificationType {\n  info = 'info',\n  warning = 'warning',\n}\n\nexport type NotificationItem = {\n  type: NotificationType\n  notificationId: string\n  message: string\n  footnote?: string\n  visible: boolean\n}\n\nlet NotificationId: number = 0\n\nexport const Notifications: React.FC = props => {\n  const { speechState } = useSpeechContext()\n  const [notification, setNotification] = useState<NotificationItem | null>(null)\n\n  /*\n    {\n      type: NotificationType.info,\n      message: \"Could not find 'Good vibes pants'\",\n      footnote: \"Try: 'Sneakers'\",\n      visible: true,\n    }\n    {\n      type: NotificationType.warning,\n      message: \"Bad audio. Please say again.\",\n      visible: true,\n    },\n    {\n      type: NotificationType.warning,\n      message: \"Sorry, all we hear is silence.\",\n      visible: true,\n    },\n    {\n      type: NotificationType.info,\n      message: \"Please say again\",\n      footnote: 'Try: \"Sneakers\"',\n      visible: true,\n    }\n  */\n\n  useEffect(() => {\n    const subDismiss = PubSub.subscribe(\n      SpeechlyUiEvents.DismissNotification,\n      (message: string, payload: { state: SpeechState }) => {\n        hideHints()\n      },\n    )\n    const subNotification = PubSub.subscribe(\n      SpeechlyUiEvents.Notification,\n      (message: string, payload: { message: string, footnote?: string }) => {\n        setNotification({\n          type: NotificationType.info,\n          notificationId: `msg-${NotificationId++}`,\n          message: payload.message,\n          footnote: payload.footnote,\n          visible: true,\n        })\n      },\n    )\n    const subWarningNotification = PubSub.subscribe(\n      SpeechlyUiEvents.WarningNotification,\n      (message: string, payload: { message: string, footnote?: string }) => {\n        setNotification({\n          type: NotificationType.warning,\n          notificationId: `msg-${NotificationId++}`,\n          message: payload.message,\n          footnote: payload.footnote,\n          visible: true,\n        })\n      },\n    )\n    return () => {\n      PubSub.unsubscribe(subNotification)\n      PubSub.unsubscribe(subWarningNotification)\n      PubSub.unsubscribe(subDismiss)\n    }\n  }, [])\n\n  useEffect(() => {\n    switch (speechState) {\n      case SpeechState.Recording: {\n        hideHints()\n      }\n    }\n  }, [speechState])\n\n  const hideHints = (): void => {\n    setNotification(prev => (prev !== null ? { ...prev, visible: false } : null))\n  }\n\n  return (\n    <>\n      {notification?.type === NotificationType.info && (\n        <Info visible={notification?.visible || false} color=\"#fff\" backgroundcolor=\"#46c\">\n          <InfoIcon color=\"#fff\" />\n          <div>\n            {notification?.message}\n            {notification?.footnote !== null && (\n              <>\n                <br />\n                <small>{notification.footnote}</small>\n              </>\n            )}\n          </div>\n        </Info>\n      )}\n      {notification?.type === NotificationType.warning && (\n        <Info visible={notification?.visible || false} color=\"#000\" backgroundcolor=\"#fc0\">\n          <WarningIcon color=\"#000\" />\n          <div>\n            {notification?.message}\n            {notification?.footnote !== null && (\n              <>\n                <br />\n                <small>{notification?.footnote}</small>\n              </>\n            )}\n          </div>\n        </Info>\n      )}\n    </>\n  )\n}\n\nconst InfoIcon: React.FC<{ color: string }> = props => {\n  return (\n    <IconSvg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n      <g fill={props.color} fillRule=\"evenodd\">\n        <path d=\"M12 1.5c5.799 0 10.5 4.701 10.5 10.5S17.799 22.5 12 22.5 1.5 17.799 1.5 12 6.201 1.5 12 1.5zM12 3a9 9 0 100 18 9 9 0 000-18z\" />\n        <path fillRule=\"nonzero\" d=\"M13 10v8h-2v-6.5h-1V10z\" />\n        <circle cx=\"11.75\" cy=\"7.5\" r=\"1.5\" />\n      </g>\n    </IconSvg>\n  )\n}\n\nconst WarningIcon: React.FC<{ color: string }> = props => {\n  return (\n    <IconSvg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M12.738.743a1.5 1.5 0 01.568.567l10.429 18.452A1.5 1.5 0 0122.429 22H1.571a1.5 1.5 0 01-1.306-2.238L10.695 1.31a1.5 1.5 0 012.043-.567zM8.5 13H7v1a5.001 5.001 0 004.25 4.944V21h1.5v-2.056A5.001 5.001 0 0017 14v-1h-1.5v1l-.005.192A3.5 3.5 0 0112 17.5l-.192-.005A3.5 3.5 0 018.5 14v-1zM12 6a2 2 0 00-2 2v6a2 2 0 104 0V8a2 2 0 00-2-2z\"\n        fill={props.color}\n        fillRule=\"evenodd\"\n      />\n    </IconSvg>\n  )\n}\n\nconst IconSvg = styled.svg`\n  width: 1.5rem;\n  height: 1.5rem;\n  flex-shrink: 0;\n  margin-right: 0.5rem;\n  margin-bottom: auto;\n`\n"]},"metadata":{},"sourceType":"script"}